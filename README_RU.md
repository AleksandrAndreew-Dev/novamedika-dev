### –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ "–ù–æ–≤–∞–º–µ–¥–∏–∫–∞"

---

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–ª–∏—á–∏—è –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –≤ –∞–ø—Ç–µ—á–Ω–æ–π —Å–µ—Ç–∏ ¬´–ù–æ–≤–∞–º–µ–¥–∏–∫–∞¬ª. –°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç:
- –ó–∞–≥—Ä—É–∑–∫—É –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV
- –ü–æ–∏—Å–∫ –ª–µ–∫–∞—Ä—Å—Ç–≤ –∏ –∞–ø—Ç–µ–∫
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Elasticsearch –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –§–æ–Ω–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–¥–∞—á —Å Celery
- REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Backend**: Django (Python)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL
- **–ü–æ–∏—Å–∫**: Elasticsearch 7.x
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏**: Celery + RabbitMQ + Redis
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Redis
- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä**: Nginx
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è**: Docker Compose
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Flower

---

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**
   - –ü—Ä–∏–µ–º CSV-—Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ API
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Elasticsearch –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

2. **–ü–æ–∏—Å–∫ –ª–µ–∫–∞—Ä—Å—Ç–≤**
   - –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, —Ñ–æ—Ä–º–µ, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—é
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥–æ—Ä–æ–¥—É
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ø—Ç–µ–∫–∞–º–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∞–ø—Ç–µ–∫
   - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∞–ø—Ç–µ–∫–µ
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–ø—Ç–µ–∫

4. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ Flower
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞–º–∏ Elasticsearch
   - –ñ—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤

---

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker
- Docker Compose

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   cp .env.example .env
   ```
   –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ `.env`

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
   ```bash
   docker-compose -f docker-compose.dev.yml up --build
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ–∂–∏–º–µ:
   ```bash
   docker-compose -f docker-compose.prod.yml up --build -d
   ```

---

## API Endpoints
### –ó–∞–≥—Ä—É–∑–∫–∞ CSV
```
POST /api/<pharmacy_name>/<pharmacy_number>/
```
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `file`: CSV-—Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏
```
GET /api/check_status/<task_id>/
```

### –ü–æ–∏—Å–∫ –ª–µ–∫–∞—Ä—Å—Ç–≤
```
GET /search_products?name=...&city=...
```


## –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
### Elasticsearch
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `elasticsearch.yml`:
- –û—Ç–∫–ª—é—á–µ–Ω–∞ security –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–º—è—Ç–∏
- –ù–∞—Å—Ç—Ä–æ–µ–Ω healthcheck –¥–ª—è Docker

### Nginx
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤ `nginx.conf`:
- HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç
- –û—Ç–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏ –∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ Django
- –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ (`client_max_body_size 50M`)

---

## –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏
–ó–∞–¥–∞—á–∏ Celery (–Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `pharmacies/tasks.py`):
1. `update_elasticsearch_index` - —á–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
2. `full_elasticsearch_resync` - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (–ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)
3. `update_pharmacy_city_in_index` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–ø—Ç–µ–∫

---

## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (models.py)
1. **Pharmacy** (–ê–ø—Ç–µ–∫–∞)
   - –ù–∞–∑–≤–∞–Ω–∏–µ, –Ω–æ–º–µ—Ä, –≥–æ—Ä–æ–¥, –∞–¥—Ä–µ—Å
   - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π UUID –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä

2. **Product** (–õ–µ–∫–∞—Ä—Å—Ç–≤–æ)
   - –ù–∞–∑–≤–∞–Ω–∏–µ, —Ñ–æ—Ä–º–∞, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å
   - –¶–µ–Ω—ã (—Ä–æ–∑–Ω–∏—á–Ω–∞—è, –æ–ø—Ç–æ–≤–∞—è)
   - –°–≤—è–∑—å —Å –∞–ø—Ç–µ–∫–æ–π
   - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞

3. **CsvProcessingTask** (–ó–∞–¥–∞—á–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏)
   - –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –°–≤—è–∑—å —Å –∞–ø—Ç–µ–∫–æ–π

---

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Elasticsearch**
   - –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–∞–ø–ø–∏–Ω–≥–∏ –≤ `documents.py`
   - –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
   - Healthcheck –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ CSV**
   - –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
   - –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
   - –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
   - –ó–∞—â–∏—Ç–∞ –∫—É–∫ (SameSite, Secure)
   - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ Flower

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–î–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:5555` (Flower)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –∑–∞–¥–∞—á
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–æ—Ä–∫–µ—Ä–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏

---


<h2>üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã</h2>

<p align="center">
  <figure style="display:inline-block; margin:10px; text-align:center;">
    <a href="./docs/main_page.png"><img src="./docs/main_page.png" width="250"></a>
    <figcaption>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (https)</figcaption>
  </figure>
  <figure style="display:inline-block; margin:10px; text-align:center;">
    <a href="./docs/medicine_name_and_city.png"><img src="./docs/medicine_name_and_city.png" width="250"></a>
    <figcaption>–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –≥–æ—Ä–æ–¥—É</figcaption>
  </figure>
  <figure style="display:inline-block; margin:10px; text-align:center;">
    <a href="./docs/select_dosage_and_form.png"><img src="./docs/select_dosage_and_form.png" width="250"></a>
    <figcaption>–í—ã–±–æ—Ä –¥–æ–∑–∏—Ä–æ–≤–∫–∏ –∏ —Ñ–æ—Ä–º—ã</figcaption>
  </figure>
</p>

<p align="center">
  <figure style="display:inline-block; margin:10px; text-align:center;">
    <a href="./docs/result.png"><img src="./docs/result.png" width="250"></a>
    <figcaption>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</figcaption>
  </figure>
  <figure style="display:inline-block; margin:10px; text-align:center;">
    <a href="./docs/result_full.png"><img src="./docs/result_full.png" width="250"></a>
    <figcaption>–ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</figcaption>
  </figure>
  <figure style="display:inline-block; margin:10px; text-align:center;">
    <a href="./docs/pharmacies_total.png"><img src="./docs/pharmacies_total.png" width="250"></a>
    <figcaption>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî —Å–ø–∏—Å–æ–∫ –∞–ø—Ç–µ–∫</figcaption>
  </figure>
  <figure style="display:inline-block; margin:10px; text-align:center;">
    <a href="./docs/products_total.png"><img src="./docs/products_total.png" width="250"></a>
    <figcaption>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</figcaption>
  </figure>
</p>
